<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="John Benninghoff">
<meta name="dcterms.date" content="2020-12-30">

<title>rtraining - R Setup Log</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../analysis/FaultTree.html" rel="next">
<link href="../analysis/r-training-log.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">rtraining</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../NEWS.html" rel="" target="">
 <span class="menu-text">Changelog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../TODO.html" rel="" target="">
 <span class="menu-text">TODO</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <a href="../index.xml" rel="" title="" class="quarto-navigation-tool px-1" aria-label="rss"><i class="bi bi-rss"></i></a>
    <a href="https://github.com/jabenninghoff/rtraining" rel="" title="" class="quarto-navigation-tool px-1" aria-label="github"><i class="bi bi-github"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../analysis/r-setup-log.html">R Setup Log</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/r-training-log.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Training Log</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/r-setup-log.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">R Setup Log</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/FaultTree.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FaultTree.widget Test</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/advanced-r-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Advanced R (Foundations)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/advanced-r-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Advanced R (Functional programming)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/advanced-r-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Advanced R (Object-oriented programming)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/advanced-r-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Advanced R (Metaprogramming)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/ggplot2-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ggplot2 (Getting started)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/ggplot2-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ggplot2 (Layers)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/ggplot2-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ggplot2 (Scales)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/ggplot2-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ggplot2 (Grammar)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../analysis/ggplot2-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ggplot2 (Extending)</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#installing-r" id="toc-installing-r" class="nav-link active" data-scroll-target="#installing-r">Installing R</a>
  <ul class="collapse">
  <li><a href="#r-variants" id="toc-r-variants" class="nav-link" data-scroll-target="#r-variants">R Variants</a></li>
  </ul></li>
  <li><a href="#r-workspace" id="toc-r-workspace" class="nav-link" data-scroll-target="#r-workspace">R Workspace</a>
  <ul class="collapse">
  <li><a href="#development-environment" id="toc-development-environment" class="nav-link" data-scroll-target="#development-environment">Development Environment</a></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages">Packages</a>
  <ul class="collapse">
  <li><a href="#base-r-packages" id="toc-base-r-packages" class="nav-link" data-scroll-target="#base-r-packages">Base R Packages</a></li>
  <li><a href="#development-packages" id="toc-development-packages" class="nav-link" data-scroll-target="#development-packages">Development Packages</a></li>
  <li><a href="#project-packages" id="toc-project-packages" class="nav-link" data-scroll-target="#project-packages">Project Packages</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#using-r" id="toc-using-r" class="nav-link" data-scroll-target="#using-r">Using R</a>
  <ul class="collapse">
  <li><a href="#use-git" id="toc-use-git" class="nav-link" data-scroll-target="#use-git">Use git!</a></li>
  <li><a href="#using-rstudio-with-github" id="toc-using-rstudio-with-github" class="nav-link" data-scroll-target="#using-rstudio-with-github">Using RStudio with GitHub</a></li>
  <li><a href="#r-notebooks" id="toc-r-notebooks" class="nav-link" data-scroll-target="#r-notebooks">R Notebooks</a></li>
  <li><a href="#publishing-r-notebooks" id="toc-publishing-r-notebooks" class="nav-link" data-scroll-target="#publishing-r-notebooks">Publishing R Notebooks</a>
  <ul class="collapse">
  <li><a href="#publishing-with-rmarkdown" id="toc-publishing-with-rmarkdown" class="nav-link" data-scroll-target="#publishing-with-rmarkdown">Publishing with rmarkdown</a></li>
  <li><a href="#update-on-publishing" id="toc-update-on-publishing" class="nav-link" data-scroll-target="#update-on-publishing">Update on Publishing</a></li>
  </ul></li>
  <li><a href="#r-package-layout" id="toc-r-package-layout" class="nav-link" data-scroll-target="#r-package-layout">R Package Layout</a></li>
  <li><a href="#r-workflow" id="toc-r-workflow" class="nav-link" data-scroll-target="#r-workflow">R Workflow</a></li>
  </ul></li>
  <li><a href="#next-steps" id="toc-next-steps" class="nav-link" data-scroll-target="#next-steps">Next Steps</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jabenninghoff/rtraining/blob/main/analysis/r-setup-log.Rmd" class="toc-action">View source</a></p><p><a href="https://github.com/jabenninghoff/rtraining/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">R Setup Log</h1>
  <div class="quarto-categories">
    <div class="quarto-category">notes</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>John Benninghoff </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 30, 2020</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>My notes on my personal R setup. I started my R journey in <a href="https://www.information-safety.org/2020/09/11/working-with-r/">September 2020</a> after <a href="https://societyinforisk.org/event-3899786">SIRACon 2020</a>. My current setup is documented in <a href="https://jabenninghoff.github.io/rdev/articles/rdev.html">rdev</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># no libraries</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="installing-r" class="level1">
<h1>Installing R</h1>
<p>I prefer installing R and RStudio using <a href="https://brew.sh">Homebrew</a>. I use <a href="https://github.com/Homebrew/homebrew-bundle">Homebrew Bundle</a> to install all software on my systems, but installing R and RStudio is simple enough using the command line:</p>
<!-- note: lintr version <= 2.0.1 throws an error when using language identifiers: <https://github.com/r-lib/lintr/issues/505> -->
<div class="sourceCode" id="cb2"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install <span class="at">--formula</span> r <span class="kw">&amp;&amp;</span> <span class="ex">brew</span> install <span class="at">--cask</span> rstudio</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="r-variants" class="level2">
<h2 class="anchored" data-anchor-id="r-variants">R Variants</h2>
<p><strong>TL;DR: just use homebrew.</strong></p>
<p>I don’t recommend installing the <code>cask</code> variant of r because it creates problems with <code>brew doctor</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> info <span class="at">--cask</span> r</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>==&gt; r: 4.3.2
https://www.r-project.org/
Not installed
From: https://github.com/Homebrew/homebrew-cask/blob/HEAD/Casks/r/r.rb
==&gt; Name
R
==&gt; Description
Environment for statistical computing and graphics
==&gt; Artifacts
R-4.3.2-x86_64.pkg (Pkg)
==&gt; Analytics
install: 849 (30 days), 2,532 (90 days), 6,039 (365 days)</code></pre>
</div>
</div>
<p>I tried “<a href="https://luispuerto.net/blog/2018/05/11/installing-r-with-homebrew-with-all-the-capabilities/">installing all the things</a>” with <a href="https://github.com/sethrfore/homebrew-r-srf">homebrew-r-srf</a> but didn’t like how the uninstall doesn’t clean up, and frankly, I haven’t found a need for more than the capabilities included with homebrew R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">capabilities</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       jpeg         png        tiff       tcltk         X11        aqua 
       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
   http/ftp     sockets      libxml        fifo      cledit       iconv 
       TRUE        TRUE       FALSE        TRUE       FALSE        TRUE 
        NLS       Rprof     profmem       cairo         ICU long.double 
       TRUE        TRUE        TRUE        TRUE        TRUE        TRUE 
    libcurl 
       TRUE </code></pre>
</div>
</div>
<p>Currently, this is everything except the X11 dependencies, which aren’t really needed:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>?capabilities</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><strong>Note to macOS users</strong></p>
<p>Capabilities “jpeg”, “png” and “tiff” refer to the X11-based versions of these devices. If capabilities(“aqua”) is true, then these devices with type = “quartz” will be available, and out-of-the-box will be the default type. Thus for example the tiff device will be available if capabilities(“aqua”) || capabilities(“tiff”) if the defaults are unchanged.</p>
</blockquote>
<p>As an active contributor to Homebrew, I <em>strongly</em> recommend using it for any/all software; their quality control is excellent.</p>
</section>
</section>
<section id="r-workspace" class="level1">
<h1>R Workspace</h1>
<p>Once R and RStudio have been installed, you’ll need a development environment and some packages.</p>
<section id="development-environment" class="level2">
<h2 class="anchored" data-anchor-id="development-environment">Development Environment</h2>
<p>Well, obviously, I use <a href="https://posit.co/download/rstudio-desktop/">RStudio</a>. There are other IDEs available, and it’s also possible to develop using the command line, but RStudio provides a pleasant, integrated experience for R development, and actively supports the R community. I don’t typically use the built-in Git client, instead using the GitHub Desktop client and git command-line tool.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install github</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I also occasionally use <code>vim</code> (mainly for shell scripts) and <a href="https://atom.io">atom</a> (mainly for vanilla <code>.md</code> files using <a href="https://atom.io/packages/markdown-preview-enhanced">markdown-preview-enhanced</a>).</p>
</section>
<section id="packages" class="level2">
<h2 class="anchored" data-anchor-id="packages">Packages</h2>
<p>Managing packages and environments are a challenge for most modern languages. Thankfully R doesn’t have the same level of challenge as python, or even ruby, managing packages available within a project is a best practice. I use <a href="https://github.com/rstudio/renv">renv</a> for this purpose. (I originally discovered <a href="https://rstudio.github.io/packrat/">packrat</a> but quickly discovered RStudio is replacing it with renv)</p>
<p>Here is my package maintenance approach:</p>
<section id="base-r-packages" class="level3">
<h3 class="anchored" data-anchor-id="base-r-packages">Base R Packages</h3>
<p>With no projects open, I periodically check for updates to the base R packages using the RStudio Packages “Update” function. These are the only packages I install to the base directory <code>/usr/local/Cellar/r/4.0.3_2/lib/R/library</code>. <em>Note: upgrading or reinstalling r through homebrew may ‘downgrade’ the base packages.</em></p>
</section>
<section id="development-packages" class="level3">
<h3 class="anchored" data-anchor-id="development-packages">Development Packages</h3>
<p>The only other tools I install outside of projects are for supporting development. Originally this was just renv, but now it includes a number of development tools needed to create projects. I use the R site library used by <a href="https://github.com/Homebrew/homebrew-core/blob/master/Formula/r/r.rb">homebrew</a>, currently <code>/usr/local/lib/R/4.0/site-library</code>. I’ve developed a shell script to install development packages that you can find in the tools directory of <a href="https://github.com/jabenninghoff/rtraining">this repository</a>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/sh</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install development packages to site repository</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># thanks to https://blog.sellorm.com/2017/10/21/quick-script-to-install-an-r-package-from-the-command-line/</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># and https://github.com/Homebrew/homebrew-core/blob/master/Formula/r/r.rb</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># designed to work with homebrew: `brew install --formula r &amp;&amp; brew install --cask rstudio`</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span> <span class="at">-ex</span> <span class="co"># halt script on error, echo on</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="va">PREFIX</span><span class="op">=</span><span class="kw">`</span><span class="ex">brew</span> <span class="at">--prefix</span><span class="kw">`</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="va">RVERSION</span><span class="op">=</span><span class="kw">`</span><span class="va">${PREFIX}</span><span class="ex">/bin/Rscript</span> <span class="at">-e</span> <span class="st">'cat(as.character(getRversion()[1,1:2]))'</span><span class="kw">`</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="va">SITELIB</span><span class="op">=</span><span class="st">"</span><span class="va">${PREFIX}</span><span class="st">/lib/R/</span><span class="va">${RVERSION}</span><span class="st">/site-library"</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="va">DEVPKG</span><span class="op">=</span><span class="st">'c("renv", "styler", "lintr", "miniUI", "devtools", "available")'</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">[</span> <span class="ot">!</span> <span class="ot">-d</span> <span class="st">"</span><span class="va">${SITELIB}</span><span class="st">"</span> <span class="bu">]</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="cf">then</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">"fatal error: </span><span class="va">${SITELIB}</span><span class="st"> does not exist - not using </span><span class="dt">\`</span><span class="st">brew install --formula r</span><span class="dt">\`</span><span class="st">?"</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">exit</span> 1</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install libgit2 <span class="co"># required by devtools</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"install.packages(</span><span class="va">${DEVPKG}</span><span class="st">, repos=</span><span class="dt">\"</span><span class="st">https://cran.rstudio.com</span><span class="dt">\"</span><span class="st">, lib=</span><span class="dt">\"</span><span class="va">${SITELIB}</span><span class="dt">\"</span><span class="st">)"</span> <span class="kw">|</span> <span class="ex">R</span> <span class="at">--no-save</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="project-packages" class="level3">
<h3 class="anchored" data-anchor-id="project-packages">Project Packages</h3>
<p>Any packages <em>not</em> needed to create projects I install within a project using renv - here are some good intros:</p>
<ul>
<li>A <a href="https://www.rstudio.com/resources/rstudioconf-2020/renv-project-environments-for-r/">presentation at rstudio::conf 2020</a></li>
<li>The <a href="https://posit.co/blog/renv-project-environments-for-r/">RStudio Blog post</a></li>
<li>An <a href="https://rstudio.github.io/renv/articles/renv.html">Introduction to renv</a></li>
<li><a href="https://github.com/rstudio/renv">renv</a> on GitHub</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">init</span>() <span class="co"># to set up renv in the project</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">install</span>(<span class="st">"rtraining"</span>) <span class="co"># to install a package</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">status</span>() <span class="co"># checks if renv.lock is in sync</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">snapshot</span>() <span class="co"># save libraries in renv.lock</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">restore</span>() <span class="co"># restore libraries from renv.lock - use when first using an existing project</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">clean</span>() <span class="co"># remove extra libraries</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">update</span>() <span class="co"># check for unpdated versions of installed libraries</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you’re installing (development) versions of packages from GitHub, you’ll be prompted to set up a personal access token using <code>create_github_token()</code> and adding it to your <code>.Renviron</code> as <code>GITHUB_PAT=</code> using <code>usethis::edit_r_environ()</code>. I had to install the development versions of both <code>styler</code> and <code>lintr</code> due to bugs not yet fixed in the released (CRAN) versions. I did also look at using <a href="https://pak.r-lib.org">pak</a> but found it too buggy to use.</p>
<p><em>Note:</em> I came across an odd quirk where renv will prompt you to upgrade base R projects, even if they’re not used. I resolved these by just upgrading the base packages with RStudio with no project open.</p>
<p>I’ve included some comments on useful packages in my <em>R Training Log</em> notebook.</p>
</section>
</section>
</section>
<section id="using-r" class="level1">
<h1>Using R</h1>
<p>So - what have I learned about using R? I won’t cover the actual Data Science part here, but have some recommended reading in my <em>R Training Log</em>.</p>
<section id="use-git" class="level2">
<h2 class="anchored" data-anchor-id="use-git">Use git!</h2>
<p>This wasn’t really something I learned with R, but use of version control for any kind of code/script is crucial. These days, I keep all scripts and configuration files in some flavor of public or private version control. Mostly that means GitHub, but also private git servers (via ssh) are easy to set up for work that you want to keep off of GitHub.</p>
<p>I don’t want to get too much into managing code via version control, but I favor trunk-based development with short-lived branches, small commits of working code, and rebase and merge for linear commit history. There’s a lot of good research on this topic from Google’s <a href="https://cloud.google.com/devops">Dev Ops Research and Assessment</a> team.</p>
</section>
<section id="using-rstudio-with-github" class="level2">
<h2 class="anchored" data-anchor-id="using-rstudio-with-github">Using RStudio with GitHub</h2>
<p>RStudio has good integration with GitHub. I’ve adopted the convention of “one RStudio Project (.Rproj) per repository” and storing the Rproj file in the repository. That seems to be the norm.</p>
</section>
<section id="r-notebooks" class="level2">
<h2 class="anchored" data-anchor-id="r-notebooks">R Notebooks</h2>
<p>R Notebooks are my preferred file format for data analysis, as they allow an easy mixing of text (using pandoc markdown) and R code chunks. This allows me to document what I’m doing as I go, both for reproducibility as well as recording my observations, thoughts and conclusions. It especially lends itself to iterative development:</p>
<ol type="1">
<li>Write code</li>
<li>Run code</li>
<li>See results</li>
<li>Update code</li>
</ol>
<p>This method of development is not always appropriate, but fits well with exploratory analysis. Once I get to writing functions, I’m starting to adopt the formal structure of <a href="https://r-pkgs.org/index.html">packages</a>, <a href="https://testthat.r-lib.org">testthat</a>, and <a href="https://roxygen2.r-lib.org">roxygen2</a>.</p>
<p>Specifically, I use <code>html_notebook</code>, which was recommended to me. RStudio handles this differently than <code>html_document</code>:</p>
<table class="table">
<colgroup>
<col style="width: 21%">
<col style="width: 39%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Behavior</th>
<th><code>html_notebook</code></th>
<th><code>html_document</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Quick View</td>
<td>Preview Button</td>
<td>No Preview Button</td>
</tr>
<tr class="even">
<td>Saving Files</td>
<td>Automatically knits file on save</td>
<td>Manually knit file</td>
</tr>
<tr class="odd">
<td>Rendering Files</td>
<td>Renders R output as it exists in the IDE on save</td>
<td>Renders R output by running all R code</td>
</tr>
<tr class="even">
<td>Default Options</td>
<td>Includes options for readability, hiding and downloading code, and paged tables</td>
<td>Higher-quality rendering of PNG graphics</td>
</tr>
</tbody>
</table>
<p>Essentially, R Notebooks are generally faster and more convenient when <em>doing</em> analysis, and <code>html_document</code> R Markdown files offer higher-quality output. This site uses a custom framework to convert html_notebooks to html_documents for publishing (see the next section for details). They are also a convenient way to share analysis with peers - just email the <code>.nb.html</code> file, which will include all of the output, as well as embedding the <code>.Rmd</code> source code for easy editing. This also allows people who don’t have R/RStudio to see the results of an analysis.</p>
<p>There are some drawbacks to using R Notebooks:</p>
<ul>
<li>Because R Notebooks are render-on-save, you can inadvertently end up with missing or outdated R output from your notebook when saving, if you’ve made updates and haven’t re-run the entire document. My habit is to do the following at the end of a writing session, before committing to git, which ensures a “clean” notebook:
<ol type="1">
<li>Clear the Global Environment</li>
<li>“Restart R and Clear Output”</li>
<li>“Run All”</li>
<li>Save</li>
</ol></li>
<li><a href="https://support.posit.co/hc/en-us/articles/205612627-Debugging-with-RStudio#debugging-in-r-markdown-documents">Debug breakpoints don’t work in R Markdown documents</a>. To fix this, <a href="https://bookdown.org/yihui/rmarkdown-cookbook/purl.html">convert R Markdown documents to R Scripts using purl</a> for debugging.</li>
<li>Not really a drawback, but…<code>Rcpp</code> and <code>rprojroot</code> are erroneously listed in RStudio as required to create R Markdown, which can also cause problems with <code>renv</code>. This is a <a href="https://github.com/rstudio/rstudio/issues/7935">bug in RStudio</a>, which will be fixed in version 1.4.944.</li>
</ul>
</section>
<section id="publishing-r-notebooks" class="level2">
<h2 class="anchored" data-anchor-id="publishing-r-notebooks">Publishing R Notebooks</h2>
<p>Since R Notebooks are saved as html files, it’s possible to publish them on GitHub using GitHub pages. GitHub published a <a href="https://resources.github.com/github-and-rstudio/">tutorial</a> in 2018 on getting RStudio integrated with GitHub, and I started working on that. Quickly I discovered that while the tutorial was helpful, it wasn’t quite the setup I wanted; it published R Markdown through GitHub pages, but wouldn’t directly support the automatically generated html of R Notebooks. After more searching, I was able to get Notebooks working on GitHub, but I used the method described in <a href="https://github.com/rstudio/rmarkdown/issues/1020">rstudio/rmarkdown #1020</a> - checking in the .nb.html into git, and using GitHub Pages so that you can view the rendered HTML instead of just the HTML code.</p>
<section id="publishing-with-rmarkdown" class="level3">
<h3 class="anchored" data-anchor-id="publishing-with-rmarkdown">Publishing with rmarkdown</h3>
<p>After using <code>README.md</code> and GitHub pages to publish notebooks, I found I wanted an easier way to publish and navigate across collections of notebooks. Publishing R Notebooks on GitHub pages works fine, but doesn’t offer an easy navigation structure, like <a href="https://pkgdown.r-lib.org">pkgdown</a>. I tried using pkgdown to display notebooks, but pkgdown only supports building <code>vignettes</code>, which have a distinctly different look and feel than R Notebooks. The <a href="https://bookdown.org/yihui/rmarkdown/rmarkdown-site.html">rmarkdown site generator</a>, <a href="https://rdrr.io/cran/rmarkdown/man/render_site.html">render_site</a>, allows more flexible building of websites from R Markdown files with a simple navigation bar at the top, but doesn’t support <code>html_notebook</code> files OOB.</p>
<p>To work around this, I created a simple framework for converting <code>html_notebook</code> files to <code>html_document</code> and building a <code>_site.yml</code> from a list of notebooks stored in the non-standard <code>notebooks/</code> directory, initially using a shell script, <code>build_site</code> (stored at the root of this <a href="https://github.com/jabenninghoff/rtraining">repo</a>). It does the following:</p>
<ol type="1">
<li>Creates a working directory, <code>.build-site</code></li>
<li>Builds a <code>rmarkdown::render_site()</code> <code>_site.yml</code> file that includes a menu with all notebooks in the <code>notebooks/</code> directory</li>
<li>Copies all <code>.Rmd</code> files to <code>.build-site</code> changing their type from <code>html_notebook</code> to <code>html_document</code></li>
<li>Includes some configuration to make <code>html_documents</code> work more like <code>html_notebook</code></li>
<li>Calls <code>rmarkdown::render_site()</code> to render the site in the <code>docs/</code> directory</li>
</ol>
<p>I typically rebuild a site with the following command, run from the top-level directory of the project:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-rf</span> .build-site <span class="kw">&amp;&amp;</span> <span class="fu">sh</span> build-site <span class="kw">&amp;&amp;</span> <span class="ex">open</span> docs/index.html</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This approach leverages the <a href="https://help.github.com/articles/configuring-a-publishing-source-for-github-pages/#publishing-your-github-pages-site-from-a-docs-folder-on-your-master-branch">docs functionality</a> of GitHub pages, like pkgdown.</p>
</section>
<section id="update-on-publishing" class="level3">
<h3 class="anchored" data-anchor-id="update-on-publishing">Update on Publishing</h3>
<p><code>build-site</code> has been replaced with <code>build_analysis_site()</code>! At its core, it is functionally the same: builds a <code>pkgdown</code> site, adding an “Analysis” menu with all notebooks in the (renamed) <code>analysis/</code> directory, then converts and builds the notebooks using <code>rmarkdown</code>, and moves them into the <code>docs/</code> directory. Since it is now an R Script, it’s more portable and can be more easily bundled with packages. I will be migrating its functionality to <a href="https://jabenninghoff.github.io/rdev/">rdev</a> shortly, so that it’s usable across multiple analysis projects.</p>
</section>
</section>
<section id="r-package-layout" class="level2">
<h2 class="anchored" data-anchor-id="r-package-layout">R Package Layout</h2>
<p>Here is my package layout - the table shows the path, whether it’s part of the formal R package definition, and my notes on its use.</p>
<table class="table">
<thead>
<tr class="header">
<th>Path</th>
<th style="text-align: center;">R</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>.Rbuildignore</td>
<td style="text-align: center;"><code>x</code></td>
<td>Exclude files from package</td>
</tr>
<tr class="even">
<td>.Rprofile</td>
<td style="text-align: center;"><code>x</code></td>
<td>Used by <code>renv</code> and to <a href="https://r-pkgs.org/setup.html?#personal-startup-configuration">attach development tools</a></td>
</tr>
<tr class="odd">
<td>.github</td>
<td style="text-align: center;"></td>
<td>GitHub templates and workflows</td>
</tr>
<tr class="even">
<td>.gitignore</td>
<td style="text-align: center;"><code>x</code></td>
<td>I use <a href="https://github.com/github/gitignore/blob/master/R.gitignore">R</a> and macOS exclusions, and <strong>always</strong> exclude generated files outside of <code>docs/</code></td>
</tr>
<tr class="odd">
<td>.lintr</td>
<td style="text-align: center;"></td>
<td><a href="https://github.com/r-lib/lintr">lintr</a> default linters with 100 columns: <code>linters: with_defaults(line_length_linter(100))</code></td>
</tr>
<tr class="even">
<td>DESCRIPTION</td>
<td style="text-align: center;"><code>x</code></td>
<td>use “Suggests” for development tools, per <a href="https://rstudio.github.io/renv/articles/faq.html#how-should-i-handle-development-dependencies-">renv</a></td>
</tr>
<tr class="odd">
<td>LICENSE</td>
<td style="text-align: center;"><code>x</code></td>
<td>Generated with <a href="https://usethis.r-lib.org/reference/licenses.html"><code>use_mit_license()</code></a></td>
</tr>
<tr class="even">
<td>LICENSE.md</td>
<td style="text-align: center;"></td>
<td>See above, used by <a href="https://pkgdown.r-lib.org">pkgdown</a></td>
</tr>
<tr class="odd">
<td>NAMESPACE</td>
<td style="text-align: center;"><code>x</code></td>
<td>Generated with <a href="https://roxygen2.r-lib.org">roxygen2</a></td>
</tr>
<tr class="even">
<td>NEWS.md</td>
<td style="text-align: center;"></td>
<td>Release notes, used by <a href="https://pkgdown.r-lib.org">pkgdown</a></td>
</tr>
<tr class="odd">
<td>README.Rmd</td>
<td style="text-align: center;"><code>x</code></td>
<td>Generated with <a href="https://usethis.r-lib.org/reference/use_readme_rmd.html"><code>use_readme_md()</code></a></td>
</tr>
<tr class="even">
<td>README.md</td>
<td style="text-align: center;"><code>x</code></td>
<td>Generated with <a href="https://devtools.r-lib.org/reference/build_rmd.html"><code>build_readme()</code></a></td>
</tr>
<tr class="odd">
<td>R</td>
<td style="text-align: center;"><code>x</code></td>
<td>All project functions go here, with <a href="https://roxygen2.r-lib.org">roxygen2</a> comments</td>
</tr>
<tr class="even">
<td>TODO.md</td>
<td style="text-align: center;"></td>
<td>To-do list, inspired by renv’s <a href="https://github.com/rstudio/renv/blob/99737730ea69730b211770ba2bfa78301cf0e7b2/TODO.md">historical TODO.md</a></td>
</tr>
<tr class="odd">
<td>analysis</td>
<td style="text-align: center;"></td>
<td>Exploratory data analysis in R Notebooks and R Presentations</td>
</tr>
<tr class="even">
<td>analysis/data</td>
<td style="text-align: center;"></td>
<td>When appropriate, analysis data lives here</td>
</tr>
<tr class="odd">
<td>analysis/assets</td>
<td style="text-align: center;"></td>
<td>External assets (images, other files) included in R Notebooks</td>
</tr>
<tr class="even">
<td>analysis/rendered</td>
<td style="text-align: center;"></td>
<td>Manually rendered html versions of <code>analysis/</code> files to be included in <code>docs/</code>, ie <a href="https://stackoverflow.com/questions/27930127/render-r-presentation-from-the-command-line">.Rpres files</a>, not stored in git</td>
</tr>
<tr class="odd">
<td><del>demos</del></td>
<td style="text-align: center;"><code>x</code></td>
<td>I don’t use demos, as recommended by <a href="https://r-pkgs.org/misc.html">R Packages</a></td>
</tr>
<tr class="even">
<td>docs</td>
<td style="text-align: center;"></td>
<td>Used by <a href="https://pkgdown.r-lib.org/reference/build_site.html"><code>pkgdown::build_site()</code></a> and R Notebooks rendered as <code>html_document</code> using <a href="https://rdrr.io/cran/rmarkdown/man/render_site.html"><code>rmarkdown::render_site()</code></a> via <a href="https://jabenninghoff.github.io/rdev/reference/build_analysis_site.html"><code>build_analysis_site()</code></a></td>
</tr>
<tr class="odd">
<td><em>exec</em></td>
<td style="text-align: center;"><code>x</code></td>
<td>In theory this is where command line executable scrips reside</td>
</tr>
<tr class="even">
<td>inst/templates/rmarkdown</td>
<td style="text-align: center;"><code>x</code></td>
<td><em>Planned location for <a href="https://rstudio.github.io/rstudio-extensions/rmarkdown_templates.html">R Markdown Templates</a></em></td>
</tr>
<tr class="odd">
<td>man</td>
<td style="text-align: center;"><code>x</code></td>
<td>Generated with <a href="https://roxygen2.r-lib.org">roxygen2</a></td>
</tr>
<tr class="even">
<td>package.Rproj</td>
<td style="text-align: center;"></td>
<td>I use the same name for the package, .Rproj, directory, and GitHub repo</td>
</tr>
<tr class="odd">
<td>pkgdown</td>
<td style="text-align: center;"></td>
<td>I store all <a href="https://pkgdown.r-lib.org">pkgdown</a> files here</td>
</tr>
<tr class="even">
<td><em>po</em></td>
<td style="text-align: center;"><code>x</code></td>
<td>Used for <a href="https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Internationalization">Internationalization</a></td>
</tr>
<tr class="odd">
<td>renv</td>
<td style="text-align: center;"></td>
<td>Used by <a href="https://rstudio.github.io/renv/">renv</a></td>
</tr>
<tr class="even">
<td>renv.lock</td>
<td style="text-align: center;"></td>
<td>The renv <a href="https://rstudio.github.io/renv/reference/lockfiles.html">lockfile</a></td>
</tr>
<tr class="odd">
<td>tests</td>
<td style="text-align: center;"><code>x</code></td>
<td>Tests using <a href="https://testthat.r-lib.org">testthat</a></td>
</tr>
<tr class="even">
<td>tools</td>
<td style="text-align: center;"><code>x</code></td>
<td>I use <code>tools/</code> for shell scripts that support development, like <code>setup-r</code></td>
</tr>
<tr class="odd">
<td>vignettes</td>
<td style="text-align: center;"><code>x</code></td>
<td>More typical package articles, used by <a href="https://pkgdown.r-lib.org">pkgdown</a></td>
</tr>
</tbody>
</table>
</section>
<section id="r-workflow" class="level2">
<h2 class="anchored" data-anchor-id="r-workflow">R Workflow</h2>
<p>Here is the typical workflow I’m settling into (or at least trying to…I still don’t have TDD down just yet), once a project is created. Projects are either vanilla packages and don’t contain <code>analysis/</code>, like <a href="https://jabenninghoff.github.io/rdev/">rdev</a>, or “analysis packages” and bundle analysis notebooks as a project, like <a href="https://jabenninghoff.github.io/rtraining/">rtraining</a>.</p>
<ol type="1">
<li>Check for updated packages when starting to work, (I created <a href="https://jabenninghoff.github.io/rdev/reference/check_renv.html"><code>check_renv()</code></a> for this) and check for errors using local CI checks (<a href="https://jabenninghoff.github.io/rdev/reference/ci.html"><code>ci()</code></a>).</li>
<li>When creating a new function, write the documentation first, using Roxygen - this helps encourage up-front design and clarifies goals/requirements.</li>
<li>Write tests next - both happy path and negative test cases whenever possible. 100% test coverage is overkill, but I try to write a ‘data validity checker’ which also helps define the expected format of the data.</li>
<li><a href="https://en.wikipedia.org/wiki/Test-driven_development">TDD</a>: run tests, write code that fails tests, fix code, repeat. (Don’t forget to refactor)</li>
<li>I use trunk-based development, which I learned from <a href="https://brew.sh">Homebrew</a>. I try to keep commits small, related, and implementing changes that don’t break code, merge back to main frequently - before the end of the day - and require linear commit history (ie rebase and merge).</li>
<li>Before pushing commits, I run <a href="https://jabenninghoff.github.io/rdev/reference/style_all.html"><code>style_all()</code></a> and <a href="https://jabenninghoff.github.io/rdev/reference/ci.html"><code>ci()</code></a> to fix any problems locally (just “undo” in GitHub Desktop, fix, and re-commit).</li>
</ol>
<p>One thing that annoys me is that by default, devtools just writes new lines to the end of <code>.Rbuildignore</code>, so I wrote <a href="https://jabenninghoff.github.io/rdev/reference/sort_rbuildignore.html"><code>sort_rbuildignore()</code></a>.</p>
</section>
</section>
<section id="next-steps" class="level1">
<h1>Next Steps</h1>
<p>I’ll keep adding to this document as I go, and will likely eventually migrate this notebook to a <code>vignette</code> and switch to <code>pkgdown</code>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../analysis/r-training-log.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">R Training Log</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../analysis/FaultTree.html" class="pagination-link">
        <span class="nav-page-text">FaultTree.widget Test</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, John Benninghoff</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../LICENSE.html">License</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jabenninghoff/rtraining">
      <i class="bi bi-github" role="img" aria-label="github">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>